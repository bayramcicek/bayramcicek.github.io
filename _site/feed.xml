<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.0.1">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2022-02-19T17:22:50+03:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Bayram Çiçek’s website</title><subtitle>All content written by me is by default released freely under the Public License.</subtitle><entry><title type="html">Mini-interview with LibreOffice &amp;amp; The Document Foundation membership</title><link href="http://localhost:4000/general/2021/11/27/interview-with-libreoffice-tdf-membership.html" rel="alternate" type="text/html" title="Mini-interview with LibreOffice &amp;amp; The Document Foundation membership" /><published>2021-11-27T17:18:51+03:00</published><updated>2021-11-27T17:18:51+03:00</updated><id>http://localhost:4000/general/2021/11/27/interview-with-libreoffice-tdf-membership</id><content type="html" xml:base="http://localhost:4000/general/2021/11/27/interview-with-libreoffice-tdf-membership.html"><![CDATA[<h4 id="heres-the-latest-developments-on-my-libreoffice-journey---after-google-summer-of-code-2021">Here’s the latest developments on my LibreOffice journey - after Google Summer of Code 2021:</h4>

<ul>
  <li>I’m a TDF member since October 2021.
    <ul>
      <li><a href="https://www.documentfoundation.org/governance/members/">https://www.documentfoundation.org/governance/members/</a>
<br /><br /></li>
    </ul>
  </li>
  <li>You can read the mini-interview about my contributions to LibreOffice and thoughts about TDF membership - on The Document Foundation blog:
    <ul>
      <li><a href="https://blog.documentfoundation.org/blog/2021/11/22/community-member-monday-bayram-cicek/">https://blog.documentfoundation.org/blog/2021/11/22/community-member-monday-bayram-cicek/</a></li>
    </ul>
  </li>
</ul>

<h4 id="exactly-1-year-after-first-patch">Exactly 1 year after first patch</h4>

<p>One year ago this month, I sent my <a href="https://gerrit.libreoffice.org/c/core/+/106489">first patch to LibreOffice/core</a> and announced it with a blog post titled <a href="https://bayramcicek.com.tr/general/2020/11/25/libreoffice.html">Contributing to LibreOffice: First patch</a>. In that day, I couldn’t imagine that I would successfully complete GSoC’21 and become a TDF member within 1 year.</p>

<p>Thanks to LibreOffice community, mentors and developers for their help throughout the journey. Without your help, I couldn’t do it.</p>]]></content><author><name></name></author><category term="general" /><summary type="html"><![CDATA[Here’s the latest developments on my LibreOffice journey - after Google Summer of Code 2021:]]></summary></entry><entry><title type="html">Final Report - GSoC - 100 Paper Cuts</title><link href="http://localhost:4000/libreoffice-dev/2021/08/23/final-report-gsoc.html" rel="alternate" type="text/html" title="Final Report - GSoC - 100 Paper Cuts" /><published>2021-08-23T09:03:12+03:00</published><updated>2021-08-23T09:03:12+03:00</updated><id>http://localhost:4000/libreoffice-dev/2021/08/23/final-report-gsoc</id><content type="html" xml:base="http://localhost:4000/libreoffice-dev/2021/08/23/final-report-gsoc.html"><![CDATA[<h3 id="about-project">About project</h3>

<p><em>100 Paper Cuts</em> project aims for improving user interface, implementing enhancement requests and solving most-annoying issues on the UX side of LibreOffice. <em>100 Paper Cuts</em> is a list of bugs and enhancement requests relating to LibreOffice’s user experience: <a href="https://wiki.documentfoundation.org/100_Paper_Cuts">https://wiki.documentfoundation.org/100_Paper_Cuts</a></p>

<h3 id="goal">Goal</h3>

<p>Main goal was to solve as many bugs as I can, but at least 5 bugs, during GSoC.</p>

<h3 id="my-work">My Work</h3>

<ul>
  <li>
    <p>In ‘Format &gt; Page Style… &gt; Area’ Tab, Mouseover effect added to the palettes on Color, Gradient, Bitmap, Pattern and Hatch sections.</p>
  </li>
  <li>
    <p>Fixed opposite cropping issue on flipped images in Writer</p>
  </li>
  <li>
    <p>In Writer, 3 issues about comment section fixed:</p>

    <ul>
      <li>
        <p>comment section scrolls to top of its view
  when clicking inside a comment view.</p>
      </li>
      <li>
        <p>clicking inside a comment view, scrolls the
  view to old cursor location automatically
  (if old cursor out of the visible area)</p>
      </li>
      <li>
        <p>comment section scrolls automatically to the
  old <em>selected</em> text (if it’s out of visible area)
  when clicking inside the Writer canvas view</p>
      </li>
    </ul>
  </li>
  <li>
    <p>In “Properties sidebar &gt; Cell Appearance”, Calc shows preview of the selected cell borders. This feature also added for diagonal borders.</p>
  </li>
  <li>
    <p>Calc: added diagonal borders in Toolbar&gt;Borders</p>
    <ul>
      <li>added diagonal left, diagonal right border and criss-cross border icon to Borders tab</li>
      <li>added diagonal left and diagonal right borders feature</li>
      <li>implemented removing diagonal borders when set “no border”</li>
      <li>added criss-cross line feature</li>
      <li>added a unit test for diagonal borders</li>
    </ul>
  </li>
</ul>

<h3 id="commits">Commits</h3>

<ul>
  <li><a href="https://gerrit.libreoffice.org/c/core/+/116395">https://gerrit.libreoffice.org/c/core/+/116395</a> (merged)</li>
  <li><a href="https://gerrit.libreoffice.org/c/core/+/116770">https://gerrit.libreoffice.org/c/core/+/116770</a> (merged)</li>
  <li><a href="https://gerrit.libreoffice.org/c/core/+/118638">https://gerrit.libreoffice.org/c/core/+/118638</a> (merged)</li>
  <li><a href="https://gerrit.libreoffice.org/c/core/+/120519">https://gerrit.libreoffice.org/c/core/+/120519</a> (merged)</li>
  <li><a href="https://gerrit.libreoffice.org/c/core/+/118951">https://gerrit.libreoffice.org/c/core/+/118951</a> (merged)</li>
  <li><a href="https://gerrit.libreoffice.org/c/core/+/120262">https://gerrit.libreoffice.org/c/core/+/120262</a> (WIP)</li>
</ul>

<h3 id="bugs">Bugs</h3>

<ul>
  <li><a href="https://bugs.documentfoundation.org/show_bug.cgi?id=109388">https://bugs.documentfoundation.org/show_bug.cgi?id=109388</a> (fixed)</li>
  <li><a href="https://bugs.documentfoundation.org/show_bug.cgi?id=104995">https://bugs.documentfoundation.org/show_bug.cgi?id=104995</a> (fixed)</li>
  <li><a href="https://bugs.documentfoundation.org/show_bug.cgi?id=91519">https://bugs.documentfoundation.org/show_bug.cgi?id=91519</a> (fixed)</li>
  <li><a href="https://bugs.documentfoundation.org/show_bug.cgi?id=143890">https://bugs.documentfoundation.org/show_bug.cgi?id=143890</a> (fixed)</li>
  <li>
    <p><a href="https://bugs.documentfoundation.org/show_bug.cgi?id=143919">https://bugs.documentfoundation.org/show_bug.cgi?id=143919</a> (fixed)</p>
  </li>
  <li>
    <p><a href="https://bugs.documentfoundation.org/show_bug.cgi?id=143300">https://bugs.documentfoundation.org/show_bug.cgi?id=143300</a> (reported)</p>
  </li>
  <li>
    <p>(Work In Progress): <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=51665">tdf#51665</a>: (WIP) Support diagonal borders in Writer-Tables</p>
  </li>
  <li>(worked on): <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=34438">tdf#34438</a> - group selection does not work with raster images
    <ul>
      <li>commented: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=34438#c47">https://bugs.documentfoundation.org/show_bug.cgi?id=34438#c47</a></li>
      <li>developers decided that get rid of Writer-Images</li>
      <li>this bug should be done by an experienced developer<br /><br /></li>
    </ul>
  </li>
  <li>(worked on): <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=98404">tdf#98404</a> - UX - While objects on a slide are being edited, the new slide sorter Ctrl+Shift shortcut combinations incorrectly receive focus and move the slide
    <ul>
      <li>commented: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=98404#c25">https://bugs.documentfoundation.org/show_bug.cgi?id=98404#c25</a></li>
    </ul>
  </li>
</ul>

<h3 id="whats-left-to-do-or-can-be-done">Whats left to do or can be done?</h3>

<ul>
  <li><a href="https://bugs.documentfoundation.org/show_bug.cgi?id=51665">tdf#51665</a>: (WIP) Support diagonal borders in Writer-Tables
    <ul>
      <li><a href="https://gerrit.libreoffice.org/c/core/+/120262">https://gerrit.libreoffice.org/c/core/+/120262</a></li>
      <li>This bug has 2 step: a) implement diagonal borders, b) draw them.</li>
      <li>I’m workink on this bug for ~4 weeks and it is Work in Progress. Writer-Tables doesn’t have diagonal borders feature. I implemented RES_BOX_TLBR attribute and added SID_ATTR_BORDER_DIAG_TLBR for now. After that, we should try to draw them. I’m trying to draw diagonal LEFT border first. If we can draw that, then it becomes easy to apply all the changes to diagonal RIGHT border.</li>
      <li>If we can add diagonal borders feature, we can also implement criss-cross border feature.</li>
      <li>In addition to drawing diagonal borders, we should also be able to change their color and style. To apply these 3 things (drawing, color, style), we have to change a lot of things in the codebase. Therefore I think <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=51665">tdf#51665</a> can be a standalone GSoC project itself :) <br /><br /></li>
    </ul>
  </li>
  <li><a href="https://bugs.documentfoundation.org/show_bug.cgi?id=84099">tdf#84099</a> - Calc can’t handle very high rows
    <ul>
      <li>Scrolling in spreadsheets on Calc is designed to snap to rows. Therefore, this makes it hard to work with spreadsheets with large row heights. This annoying issue is not only specific for vertical scroll but also affects horizontal scroll. If we can add <em>smooth scroll</em> feature, it will likely solve the <em>height</em> issue on both rows and columns. <br /><br /></li>
    </ul>
  </li>
  <li><a href="https://bugs.documentfoundation.org/show_bug.cgi?id=90253">tdf#90253</a> - Drawing a textbox in Impress doesn’t retain its height
    <ul>
      <li>And, this is another bug that I want to work on it.</li>
    </ul>
  </li>
</ul>

<h3 id="summary">Summary</h3>

<ul>
  <li>total bugs : 8</li>
  <li>fixed : 5</li>
  <li>WIP : 1</li>
  <li>worked on but couldn’t fix : 2</li>
</ul>

<p>I learned lots of things even from the bugs that I couldn’t fix. At least, I informed the LibreOffice community about my research and shared the code pointers by commenting on the bug page. Therefore, someone who will work on the bugs that I commented, can easily see the code pointers and my works on it.</p>

<p align="center">
    ***
</p>

<p>I’m very happy that we all reached the end of GSoC. During that time, I know that I had a responsibility for doing everything that I can. Therefore I worked hard, tried to get familiar with the LibreOffice community and worked on as many bugs as I can.</p>

<p>I learned a lot of things during the GSoC. Although GSoC is finished, I will definitely continue to contribute to LibreOffice. I am really happy to be a part of the LibreOffice community and GSoC.</p>

<h3 id="thanks">Thanks</h3>

<p>I’m really thankful to LibreOffice and Google for providing us this such a great opportunity which helped me gain this amazing experience!</p>

<p>I always tried to be active on IRC #libreoffice-dev channel, and I want to thank for everybody who helped me about my questions.</p>

<p>And most importantly, greatly thankful to <em>Muhammet Kara</em> and <em>Heiko Tietze</em> which were my mentors throughout the GSoC period. They always guided me everything about my questions. Thank you so much for your guidance, code reviews, time and everything.</p>

<p>Thanks to everyone in the LibreOffice community for their help, I learned a lot from you :)</p>

<h3 id="all-weekly-gsoc-reports">All weekly GSoC reports</h3>

<ul>
  <li>16 Aug 2021   <a href="https://bayramcicek.com.tr/libreoffice-dev/2021/08/16/week-10-gsoc.html">Week #10 - GSoC Weekly Report - 100 Paper Cuts</a></li>
  <li>08 Aug 2021   <a href="https://bayramcicek.com.tr/libreoffice-dev/2021/08/08/week-09-gsoc.html">Week #9 - GSoC Weekly Report - 100 Paper Cuts</a></li>
  <li>01 Aug 2021   <a href="https://bayramcicek.com.tr/libreoffice-dev/2021/08/01/week-07-08-gsoc.html">Week #7 - #8 - GSoC Weekly Report - 100 Paper Cuts</a></li>
  <li>18 Jul 2021   <a href="https://bayramcicek.com.tr/libreoffice-dev/2021/07/18/week-06-gsoc.html">Week #6 - GSoC Weekly Report - 100 Paper Cuts</a></li>
  <li>11 Jul 2021   <a href="https://bayramcicek.com.tr/libreoffice-dev/2021/07/11/week-05-gsoc.html">Week #5 - GSoC Weekly Report - 100 Paper Cuts</a></li>
  <li>05 Jul 2021   <a href="https://bayramcicek.com.tr/libreoffice-dev/2021/07/05/week-03-04-gsoc.html">Week #3 - #4 - GSoC Weekly Report - 100 Paper Cuts</a></li>
  <li>04 Jul 2021   <a href="https://bayramcicek.com.tr/libreoffice-dev/2021/07/04/week-02-gsoc.html">Week #2 - GSoC Weekly Report - 100 Paper Cuts</a></li>
  <li>13 Jun 2021   <a href="https://bayramcicek.com.tr/libreoffice-dev/2021/06/13/week-01-gsoc.html">Week #1 - GSoC Weekly Report - 100 Paper Cuts</a></li>
</ul>

<p><strong>Useful links:</strong></p>

<ul>
  <li><a href="https://gerrit.libreoffice.org/q/owner:mail%2540bayramcicek.com.tr">https://gerrit.libreoffice.org/q/owner:mail%2540bayramcicek.com.tr</a> (my all contributions to LibreOffice)</li>
  <li><a href="https://translations.documentfoundation.org/user/bayramcicek/">https://translations.documentfoundation.org/user/bayramcicek/</a> (my translations in LibreOffice)</li>
  <li><a href="https://bayramcicek.com.tr/libreoffice/">https://bayramcicek.com.tr/libreoffice/</a> (all blog posts related to LibreOffice development)</li>
  <li><a href="https://summerofcode.withgoogle.com/projects/#4776372494401536">https://summerofcode.withgoogle.com/projects/#4776372494401536</a> (Google Summer of Code - Project page)</li>
</ul>]]></content><author><name></name></author><category term="libreoffice-dev" /><summary type="html"><![CDATA[About project]]></summary></entry><entry><title type="html">Git: editing old commits</title><link href="http://localhost:4000/general/2021/08/18/git-edit-old-commits.html" rel="alternate" type="text/html" title="Git: editing old commits" /><published>2021-08-18T12:37:43+03:00</published><updated>2021-08-18T12:37:43+03:00</updated><id>http://localhost:4000/general/2021/08/18/git-edit-old-commits</id><content type="html" xml:base="http://localhost:4000/general/2021/08/18/git-edit-old-commits.html"><![CDATA[<ul>
  <li>list commit log</li>
</ul>
<pre>
$ git log
or
$ git log --oneline</pre>

<ul>
  <li>find SHA-ID of your commit, then:</li>
</ul>
<pre>
$ git rebase --interactive $SHA^
or
(list last e.g. 3 commit)
$ git rebase -i HEAD~3
</pre>

<ul>
  <li>
    <p>Change ‘pick’ to ‘edit’ for your commit that you want to edit</p>
  </li>
  <li>
    <p>make your changes in files etc.</p>
  </li>
  <li>
    <p>add your changes &amp; edit commit message:</p>
  </li>
</ul>

<pre>
$ git commit -a --amend
</pre>

<ul>
  <li>end rebase</li>
</ul>

<pre>
$ git rebase --continue
</pre>

<ul>
  <li>or cancel</li>
</ul>
<pre>
$ git rebase --abort
</pre>

<ul>
  <li>push changes to remote server</li>
</ul>
<pre>
git push --force-with-lease &lt;origin&gt; &lt;test-branch&gt;
</pre>

<p>(or <code class="highlighter-rouge">$ ./logerrit submit master</code> for LibreOffice)</p>]]></content><author><name></name></author><category term="general" /><summary type="html"><![CDATA[list commit log $ git log or $ git log --oneline]]></summary></entry><entry><title type="html">Week #10 - GSoC Weekly Report - 100 Paper Cuts</title><link href="http://localhost:4000/libreoffice-dev/2021/08/16/week-10-gsoc.html" rel="alternate" type="text/html" title="Week #10 - GSoC Weekly Report - 100 Paper Cuts" /><published>2021-08-16T01:01:36+03:00</published><updated>2021-08-16T01:01:36+03:00</updated><id>http://localhost:4000/libreoffice-dev/2021/08/16/week-10-gsoc</id><content type="html" xml:base="http://localhost:4000/libreoffice-dev/2021/08/16/week-10-gsoc.html"><![CDATA[<p>GSoC progress for week #10.</p>

<h4 id="calc-border-preview-doesnt-show-the-diagonal-borders-in-cell-appearance-section">Calc: Border preview doesn’t show the diagonal borders in Cell Appearance section</h4>

<ul>
  <li>Bug: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=143890">tdf#143890</a> - Border preview doesn’t show the diagonal borders</li>
  <li>Commit: <a href="https://gerrit.libreoffice.org/c/core/+/120519">https://gerrit.libreoffice.org/c/core/+/120519</a></li>
</ul>

<p>In (Sidebar Tab) <code class="highlighter-rouge">Properties &gt; Cell Appearance</code>, Calc always shows preview of the selected cell borders.</p>

<p>For example; if LEFT border set in a cell, the preview shows LEFT border (as expected). But this feature doesn’t show the preview of diagonal borders. When we set (e.g.)diagonal RIGHT border in a cell, the preview doesn’t update itself to show diagonal RIGHT border.</p>

<p>Steps to Reproduce:</p>
<ol>
  <li>open Calc and select a cell</li>
  <li>(in Sidebar) go to “Properties &gt; Cell Appearance”</li>
  <li>select Diagonal Up (and/or Down) border</li>
</ol>

<p>Actual Results:
Preview doesn’t show diagonal borders</p>

<p>Expected Results:
Diagonal borders should be shown in the preview (as other borders).</p>

<h4 id="code-pointers">Code pointers:</h4>

<ul>
  <li>
    <p>sc/source/ui/sidebar/CellAppearancePropertyPanel.cxx: <a href="https://opengrok.libreoffice.org/xref/core/sc/source/ui/sidebar/CellAppearancePropertyPanel.cxx?r=1653bb9b#467">https://opengrok.libreoffice.org/xref/core/sc/source/ui/sidebar/CellAppearancePropertyPanel.cxx?r=1653bb9b#467</a></p>
  </li>
  <li>
    <p>sc/source/ui/sidebar/CellAppearancePropertyPanel.hxx</p>
  </li>
</ul>

<h4 id="technical-details">Technical Details</h4>

<p>Line preview is drawn in:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">CellAppearancePropertyPanel</span><span class="o">::</span><span class="n">UpdateCellBorder</span><span class="p">(</span><span class="kt">bool</span> <span class="n">bTop</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bBot</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bLeft</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bRight</span><span class="p">,</span>
                                                   <span class="kt">bool</span> <span class="n">bVer</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bHor</span><span class="p">)</span>
<span class="p">{</span>
	<span class="cm">/* ... */</span>

    <span class="k">if</span><span class="p">(</span><span class="n">bLeft</span><span class="p">)</span>
        <span class="n">pVirDev</span><span class="o">-&gt;</span><span class="n">DrawLine</span><span class="p">(</span> <span class="n">aTL</span><span class="p">,</span><span class="n">aBL</span> <span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">bRight</span><span class="p">)</span>
        <span class="n">pVirDev</span><span class="o">-&gt;</span><span class="n">DrawLine</span><span class="p">(</span> <span class="n">aTR</span><span class="p">,</span><span class="n">aBR</span> <span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">bTop</span><span class="p">)</span>
        <span class="n">pVirDev</span><span class="o">-&gt;</span><span class="n">DrawLine</span><span class="p">(</span> <span class="n">aTL</span><span class="p">,</span><span class="n">aTR</span> <span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">bBot</span><span class="p">)</span>
        <span class="n">pVirDev</span><span class="o">-&gt;</span><span class="n">DrawLine</span><span class="p">(</span> <span class="n">aBL</span><span class="p">,</span><span class="n">aBR</span> <span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">bVer</span><span class="p">)</span>
        <span class="n">pVirDev</span><span class="o">-&gt;</span><span class="n">DrawLine</span><span class="p">(</span> <span class="n">aVT</span><span class="p">,</span><span class="n">aVB</span> <span class="p">);</span>

<span class="p">}</span></code></pre></figure>

<p><code class="highlighter-rouge">DrawLine()</code> method draws the lines. Here, lines for diagonal borders are missing. We need to add <code class="highlighter-rouge">DrawLine()</code> method for them and update the parameters of the <code class="highlighter-rouge">UpdateCellBorder(...)</code> function:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">CellAppearancePropertyPanel</span><span class="o">::</span><span class="n">UpdateCellBorder</span><span class="p">(</span><span class="kt">bool</span> <span class="n">bTop</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bBot</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bLeft</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bRight</span><span class="p">,</span>
                                                   <span class="kt">bool</span> <span class="n">bVer</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bHor</span><span class="p">,</span>
                                                   <span class="kt">bool</span> <span class="n">bTLBR</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bBLTR</span><span class="p">)</span>
<span class="p">{</span>                                             

    <span class="cm">/* ... */</span>

    <span class="k">if</span><span class="p">(</span><span class="n">bTLBR</span><span class="p">)</span>
        <span class="n">pVirDev</span><span class="o">-&gt;</span><span class="n">DrawLine</span><span class="p">(</span> <span class="n">aTL</span><span class="p">,</span><span class="n">aBR</span> <span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">bBLTR</span><span class="p">)</span>
        <span class="n">pVirDev</span><span class="o">-&gt;</span><span class="n">DrawLine</span><span class="p">(</span> <span class="n">aBL</span><span class="p">,</span><span class="n">aTR</span> <span class="p">);</span>

    <span class="cm">/* ... */</span>

<span class="p">}</span></code></pre></figure>

<p align="center">
	***
</p>

<p>Before:</p>

<p align="center">
  <img src="https://bayramcicek.com.tr/folder/libreoffice-png/calc_before_preview.png" alt="calc_before_preview.png" />
</p>

<p>After:</p>

<p align="center">
  <img src="https://bayramcicek.com.tr/folder/libreoffice-png/calc_after_preview.png" alt="calc_after_preview.png" />
</p>

<p><br /></p>
<p align="center">
	***
</p>

<h4 id="created-a-new-commit-for-tdf51665-wip-support-diagonal-borders-in-writer-tables">Created a new commit for tdf#51665: (WIP) Support diagonal borders in Writer-Tables</h4>

<ul>
  <li>Bug: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=51665">tdf#51665</a> - Support diagonal borders in TABLEs</li>
  <li>Commit: <a href="https://gerrit.libreoffice.org/c/core/+/120262">https://gerrit.libreoffice.org/c/core/+/120262</a></li>
</ul>

<p>patchset1:</p>
<ul>
  <li>implement RES_BOX_TLBR attribute</li>
  <li>add SID_ATTR_BORDER_DIAG_TLBR</li>
</ul>

<p>patchset2:</p>
<ul>
  <li>improve case SID_ATTR_BORDER_DIAG_TLBR (tabsh.cxx)</li>
  <li>add diagonal left condition in ndtbl1.cxx</li>
  <li>try to draw diagonal left border:
    <ul>
      <li>drawing in a cell seems complicated.</li>
      <li>currently it draw TLBR line on the document
layout, not in current cell.</li>
      <li>we have to draw TLBR line in current cell.
(needs improvement)</li>
    </ul>
  </li>
</ul>

<p>IMHO, I think tdf#51665 can be a standalone GSoC project itself. In addition to drawing diagonal borders, we should also be able to change their color and style. To apply these 3 things (drawing, color, style), we have to change a lot of things in the codebase and we need more time.</p>

<h3 id="summary-of-week-10">Summary of week #10</h3>

<ul>
  <li>Fixed: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=143890">tdf#143890</a> - Border preview doesn’t show the diagonal borders</li>
  <li>Worked on diagonal borders in Writer-Tables, and published 2 new patchsets</li>
</ul>

<p>Commits</p>
<ul>
  <li><a href="https://gerrit.libreoffice.org/c/core/+/120519">https://gerrit.libreoffice.org/c/core/+/120519</a></li>
  <li><a href="https://gerrit.libreoffice.org/c/core/+/120262">https://gerrit.libreoffice.org/c/core/+/120262</a></li>
</ul>

<h3 id="next-week-to-do">Next Week TO-DO</h3>

<ul>
  <li>Write “Final Report” blog post</li>
  <li>Make last changes on patches that on gerrit</li>
  <li>try to draw diagonal borders for Writer-Tables.</li>
</ul>]]></content><author><name></name></author><category term="libreoffice-dev" /><summary type="html"><![CDATA[GSoC progress for week #10.]]></summary></entry><entry><title type="html">Week #9 - GSoC Weekly Report - 100 Paper Cuts</title><link href="http://localhost:4000/libreoffice-dev/2021/08/08/week-09-gsoc.html" rel="alternate" type="text/html" title="Week #9 - GSoC Weekly Report - 100 Paper Cuts" /><published>2021-08-08T11:34:53+03:00</published><updated>2021-08-08T11:34:53+03:00</updated><id>http://localhost:4000/libreoffice-dev/2021/08/08/week-09-gsoc</id><content type="html" xml:base="http://localhost:4000/libreoffice-dev/2021/08/08/week-09-gsoc.html"><![CDATA[<p>GSoC progress for week #9.</p>

<h4 id="diagonal-borders-now-accessible-from-table-toolbar--borders-tab-in-calc">Diagonal borders now accessible from “Table Toolbar &gt; Borders” tab in Calc</h4>

<p>Calc has diagonal borders feature in <code class="highlighter-rouge">Format &gt; Cells... &gt; Borders tab</code> and (Sidebar Tab) <code class="highlighter-rouge">Properties &gt; Cell Appearance</code>. However, this feature wasn’t exist in “Table Toolbar &gt; Borders” tab. With commit <a href="https://gerrit.libreoffice.org/c/core/+/119685">https://gerrit.libreoffice.org/c/core/+/119685</a>, Calc can draw diagonal left and diagonal right borders from table toolbar. \o/</p>

<p>This <a href="https://gerrit.libreoffice.org/c/core/+/119685">https://gerrit.libreoffice.org/c/core/+/119685</a> commit had “<em>(WIP) Support diagonal borders in Writer-Tables</em>” name before, and I sent 3-4 patchsets for Writer-diagonal-borders, but I made it Calc-specific and changed the title as “<em>Calc: made diagonal borders accessible in Toolbar&gt;Borders</em>”. The reason of this change is: Writer and Calc use the same Border tab in Table toolbar (svx/source/tbxctrls/tbcontrl.cxx). Therefore I will leave the commit as Calc-specific and will submit a new commit just for Writer-specific. But first, I want to write UItest for Calc-diagonal-borders next week.</p>

<p>Additionaly I want to work on <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=34689">https://bugs.documentfoundation.org/show_bug.cgi?id=34689</a> - UI scroll problem: Cell with dimensions exceeding screen dimensions impossible to work with.</p>

<h4 id="code-pointers">Code pointers:</h4>

<ul>
  <li>svx/source/tbxctrls/tbcontrl.cxx: <a href="https://opengrok.libreoffice.org/xref/core/svx/source/tbxctrls/tbcontrl.cxx?r=d3228d49#2221">https://opengrok.libreoffice.org/xref/core/svx/source/tbxctrls/tbcontrl.cxx?r=d3228d49#2221</a></li>
</ul>

<h3 id="summary-of-week-9">Summary of week #9</h3>

<ul>
  <li>Worked on Writer-Tables and Calc-Borders</li>
  <li>Made diagonal borders accessible in Toolbar&gt;Borders / Calc</li>
  <li>Sent new patchsets in commit : <a href="https://gerrit.libreoffice.org/c/core/+/119685">https://gerrit.libreoffice.org/c/core/+/119685</a></li>
</ul>

<h3 id="next-week-to-do">Next Week TO-DO</h3>

<ul>
  <li>Write UItest for Calc diagonal-borders.</li>
  <li>Work on <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=34689">https://bugs.documentfoundation.org/show_bug.cgi?id=34689</a> - UI scroll problem: Cell with dimensions exceeding screen dimensions impossible to work with.</li>
</ul>]]></content><author><name></name></author><category term="libreoffice-dev" /><summary type="html"><![CDATA[GSoC progress for week #9.]]></summary></entry><entry><title type="html">Week #7 - #8 - GSoC Weekly Report - 100 Paper Cuts</title><link href="http://localhost:4000/libreoffice-dev/2021/08/01/week-07-08-gsoc.html" rel="alternate" type="text/html" title="Week #7 - #8 - GSoC Weekly Report - 100 Paper Cuts" /><published>2021-08-01T09:04:42+03:00</published><updated>2021-08-01T09:04:42+03:00</updated><id>http://localhost:4000/libreoffice-dev/2021/08/01/week-07-08-gsoc</id><content type="html" xml:base="http://localhost:4000/libreoffice-dev/2021/08/01/week-07-08-gsoc.html"><![CDATA[<p>GSoC progress for week #7 and week #8.</p>

<h4 id="made-research-on-borders-in-writer-tables">Made research on borders in Writer-Tables</h4>

<ul>
  <li>Bug: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=51665">tdf#51665</a> - Support diagonal borders in TABLEs</li>
</ul>

<p>In <code class="highlighter-rouge">Table Toolbar &gt; Bordes</code>, Writer has 8 border frames for each cell, and has 12 border frames for multiple selected cells. With 2 new borders (Diagonal Left/Right), Writer has 14 border frames.</p>

<p>I made research about how applying borders works in Writer-Tables. Then I started to work on it with sending first patchsets as WIP: <a href="https://gerrit.libreoffice.org/c/core/+/119685">https://gerrit.libreoffice.org/c/core/+/119685</a></p>

<p>I realized that Calc has diagonal borders feature in both <code class="highlighter-rouge">Format &gt; Cells... &gt; Borders tab</code> and (Sidebar Tab) <code class="highlighter-rouge">Properties &gt; Cell Appearance</code>. Next week, I will try to understand how diagonal borders work in Calc cells and will try to implement them in Writer-Tables.</p>

<h4 id="code-pointers">Code pointers:</h4>

<ul>
  <li>
    <p>sw/source/core/layout/paintfrm.cxx</p>
  </li>
  <li>
    <p>sw/source/core/doc/tblafmt.cxx</p>
  </li>
  <li>
    <p>svx/source/tbxctrls/tbcontrl.cxx: <a href="https://opengrok.libreoffice.org/xref/core/svx/source/tbxctrls/tbcontrl.cxx?r=d3228d49#2221">https://opengrok.libreoffice.org/xref/core/svx/source/tbxctrls/tbcontrl.cxx?r=d3228d49#2221</a></p>
  </li>
  <li>
    <p>sc/source/ui/sidebar/CellBorderStyleControl.cxx:133 : <a href="https://opengrok.libreoffice.org/xref/core/sc/source/ui/sidebar/CellBorderStyleControl.cxx?r=f3fc16f4#133">https://opengrok.libreoffice.org/xref/core/sc/source/ui/sidebar/CellBorderStyleControl.cxx?r=f3fc16f4#133</a>
<br /></p>
  </li>
</ul>
<p align="center">
    ***
</p>

<h3 id="summary-of-last-2-weeks">Summary of last 2 weeks</h3>

<ul>
  <li>Worked on Writer-Tables</li>
  <li>commit: (WIP) Support diagonal borders in Writer-Tables : <a href="https://gerrit.libreoffice.org/c/core/+/119685">https://gerrit.libreoffice.org/c/core/+/119685</a></li>
</ul>

<h3 id="next-week-to-do">Next Week TO-DO</h3>

<ul>
  <li>Work on Calc diagonal borders and try to implement them in Writer-Tables</li>
</ul>]]></content><author><name></name></author><category term="libreoffice-dev" /><summary type="html"><![CDATA[GSoC progress for week #7 and week #8.]]></summary></entry><entry><title type="html">Week #6 - GSoC Weekly Report - 100 Paper Cuts</title><link href="http://localhost:4000/libreoffice-dev/2021/07/18/week-06-gsoc.html" rel="alternate" type="text/html" title="Week #6 - GSoC Weekly Report - 100 Paper Cuts" /><published>2021-07-18T09:41:13+03:00</published><updated>2021-07-18T09:41:13+03:00</updated><id>http://localhost:4000/libreoffice-dev/2021/07/18/week-06-gsoc</id><content type="html" xml:base="http://localhost:4000/libreoffice-dev/2021/07/18/week-06-gsoc.html"><![CDATA[<p>GSoC progress for week #6. (first evaluations week)</p>

<h3 id="new-icons-for-diagonal-borders">New icons for diagonal borders</h3>

<ul>
  <li>Bug: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=143300">tdf#143300</a>: Add icons for diagonal borders</li>
</ul>

<p>I wanted to add diagonal borders to the <code class="highlighter-rouge">table toolbar &gt; borders</code> but realized that LO doesn’t have diagonal left and diagonal right borders under <code class="highlighter-rouge">./icon-themes/*/svx/res/*</code>. Then on the <em>LibreOffice Design EN</em> telegram channel, I said that these icons are necessary for tdf#51665. Designers wanted me to open a new report dedicated for the icons, so that <em>Rizal Muttaqin</em>(huge thanks for the icons) could draw them. Diagonal border icons will be added for all themes soon.</p>

<h3 id="ui---add-diagonal-borders-in-table-toolbar">UI - add diagonal borders in Table toolbar</h3>

<ul>
  <li>Bug: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=51665">tdf#51665</a>: Support diagonal borders in TABLEs</li>
  <li>Commit: <a href="https://gerrit.libreoffice.org/c/core/+/118951">https://gerrit.libreoffice.org/c/core/+/118951</a></li>
</ul>

<p>In order to work on <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=51665">tdf#51665</a>, I added diagonal borders to <code class="highlighter-rouge">table toolbar &gt; borders</code>.</p>

<p align="center">
  <img src="https://bayramcicek.com.tr/folder/libreoffice-png/one_cell_border_0.png" alt="one_cell_border_0.png" />
</p>

<p align="center">
    <i>One cell selected (standard view)</i>
</p>

<p><br /></p>
<p align="center">
  <img src="https://bayramcicek.com.tr/folder/libreoffice-png/multi_cell_border_1.png" alt="multi_cell_border_1.png" />
</p>

<p align="center">
    <i>Multiple cell selected</i>
</p>

<h3 id="technical-details">Technical Details</h3>

<ul>
  <li>Tooltips</li>
</ul>

<p>Added tooltip <em>“Set Diagonal Left Border”</em> for diagonal LEFT border.<br />
Added tooltip <em>“Set Diagonal Right Border”</em> for for diagonal RIGHT border.</p>

<p>In <code class="highlighter-rouge">include/svx/strings.hrc</code>:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#define RID_SVXSTR_PARA_PRESET_DIAGONALLEFT         NC_("RID_SVXSTR_PARA_PRESET_DIAGONALLEFT", "Set Diagonal Left Border")
#define RID_SVXSTR_PARA_PRESET_DIAGONALRIGHT        NC_("RID_SVXSTR_PARA_PRESET_DIAGONALRIGHT", "Set Diagonal Right Border")</span></code></pre></figure>

<ul>
  <li>Icons</li>
</ul>

<p>Added diagonal Left and Right borders to the <code class="highlighter-rouge">svx/inc/bitmaps.hlst</code>:</p>

<p><code class="highlighter-rouge">fr013.png</code> -&gt; Right Diagonal Border<br />
<code class="highlighter-rouge">fr014.png</code> -&gt; Left Diagonal Border</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#define RID_SVXBMP_FRAME13                          "svx/res/fr013.png"
#define RID_SVXBMP_FRAME14                          "svx/res/fr014.png"</span></code></pre></figure>

<ul>
  <li>Update <em>for loops</em> and <em>switch cases</em>:</li>
</ul>

<p>Increased all for loops limits by 2. <code class="highlighter-rouge">svx/source/tbxctrls/tbcontrl.cxx</code>:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">//bParagraphMode should have been set in StateChanged</span>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="n">bParagraphMode</span> <span class="p">)</span>
    <span class="k">for</span> <span class="p">(</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">13</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">)</span> <span class="c1">// made -&gt; for ( i = 11; i &lt; 15; i++ )</span>
        <span class="n">mxFrameSet</span><span class="o">-&gt;</span><span class="n">InsertItem</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">Image</span><span class="p">(</span><span class="n">aImgVec</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="n">first</span><span class="p">),</span> <span class="n">aImgVec</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="n">second</span><span class="p">);</span> </code></pre></figure>

<p>Updated <code class="highlighter-rouge">mxFrameSet-&gt;SetColCount( 4 );</code> to <code class="highlighter-rouge">mxFrameSet-&gt;SetColCount( 5 );</code>, because column size should be 5 after adding the diagonal borders to the 5.th and 10.th order:</p>

<p><code class="highlighter-rouge">svx/source/tbxctrls/tbcontrl.cxx</code>:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">case</span> <span class="mi">5</span><span class="p">:</span> <span class="k">break</span><span class="p">;</span>  <span class="c1">// DIAGONAL LEFT</span>

<span class="k">case</span> <span class="mi">6</span><span class="p">:</span> <span class="n">pTop</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">theDefLine</span><span class="p">;</span>
        <span class="n">nValidFlags</span> <span class="o">|=</span> <span class="n">FrmValidFlags</span><span class="o">::</span><span class="n">Top</span><span class="p">;</span>
<span class="k">break</span><span class="p">;</span>  <span class="c1">// TOP</span>

<span class="cm">/*...*/</span>

<span class="k">case</span> <span class="mi">10</span><span class="p">:</span> <span class="k">break</span><span class="p">;</span>  <span class="c1">// DIAGONAL RIGHT</span></code></pre></figure>

<p>Add them in correct order:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">SvxFrameWindow_Impl</span><span class="o">::</span><span class="n">InitImageList</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">aImgVec</span> <span class="o">=</span> <span class="p">{</span>
        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME1</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_TABLE_PRESET_NONE</span><span class="p">)},</span>
        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME2</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_PARA_PRESET_ONLYLEFT</span><span class="p">)},</span>
        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME3</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_PARA_PRESET_ONLYRIGHT</span><span class="p">)},</span>
        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME4</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_PARA_PRESET_LEFTRIGHT</span><span class="p">)},</span>
        <span class="c1">// diagonal left border</span>
        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME14</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_PARA_PRESET_DIAGONALLEFT</span><span class="p">)},</span>

        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME5</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_PARA_PRESET_ONLYTOP</span><span class="p">)},</span>
        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME6</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_PARA_PRESET_ONLYTBOTTOM</span><span class="p">)},</span>
        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME7</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_PARA_PRESET_TOPBOTTOM</span><span class="p">)},</span>
        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME8</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_TABLE_PRESET_ONLYOUTER</span><span class="p">)},</span>
        <span class="c1">// diagonal right border</span>
        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME13</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_PARA_PRESET_DIAGONALRIGHT</span><span class="p">)},</span>

        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME9</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_PARA_PRESET_TOPBOTTOMHORI</span><span class="p">)},</span>
        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME10</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_TABLE_PRESET_OUTERHORI</span><span class="p">)},</span>
        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME11</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_TABLE_PRESET_OUTERVERI</span><span class="p">)},</span>
        <span class="p">{</span><span class="n">BitmapEx</span><span class="p">(</span><span class="n">RID_SVXBMP_FRAME12</span><span class="p">),</span> <span class="n">SvxResId</span><span class="p">(</span><span class="n">RID_SVXSTR_TABLE_PRESET_OUTERALL</span><span class="p">)}</span>
    <span class="p">};</span>
<span class="p">}</span></code></pre></figure>

<p align="center">
    ***
</p>

<h3 id="summary-of-week-6">Summary of week #6</h3>

<ul>
  <li>I opened a new report in Bugzilla for the icons: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=143300">tdf#143300</a>: Add icons for diagonal borders</li>
  <li>Added UI of the floating widget. Commit: <a href="https://gerrit.libreoffice.org/c/core/+/118951">https://gerrit.libreoffice.org/c/core/+/118951</a></li>
</ul>

<h3 id="next-week-to-do">Next Week TO-DO</h3>

<ul>
  <li>Work on <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=51665">tdf#51665</a>: Support diagonal borders in TABLEs</li>
</ul>]]></content><author><name></name></author><category term="libreoffice-dev" /><summary type="html"><![CDATA[GSoC progress for week #6. (first evaluations week)]]></summary></entry><entry><title type="html">Week #5 - GSoC Weekly Report - 100 Paper Cuts</title><link href="http://localhost:4000/libreoffice-dev/2021/07/11/week-05-gsoc.html" rel="alternate" type="text/html" title="Week #5 - GSoC Weekly Report - 100 Paper Cuts" /><published>2021-07-11T09:24:45+03:00</published><updated>2021-07-11T09:24:45+03:00</updated><id>http://localhost:4000/libreoffice-dev/2021/07/11/week-05-gsoc</id><content type="html" xml:base="http://localhost:4000/libreoffice-dev/2021/07/11/week-05-gsoc.html"><![CDATA[<p>GSoC progress for week #5.</p>

<h3 id="get-rid-of-writer-images">Get rid of Writer-Images</h3>

<ul>
  <li>Bug: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=34438">tdf#34438</a> (Image-Group) - [feature request, FORMATTING] group selection does not work with raster images.</li>
</ul>

<p>Last week I shared a blog post of my research on this bug <a href="https://bayramcicek.com.tr/libreoffice-dev/2021/07/05/week-03-04-gsoc.html">here</a> and this week I posted a comment about my 2-week research on the bug page of tdf#34438 <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=34438#c47">here</a>, and Regina Henschel replied with a comment <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=34438#c48">here</a> (thanks for the reply):</p>

<blockquote>
  <p>[…] So from my point of view we should get rid of Writer-images. But that is a long way. […] So to get rid of Writer-images it would be necessary to implement the services, which are provided by Writer-images for Draw-images too …</p>
</blockquote>

<p>So, the last decision is: get rid of writer-images. Convert them into drawing objects, but also implement the writer-images’ services/attributes to drawing-images.</p>

<h3 id="prevent-jump-to-top-of-the-comment-view--writer-comments">Prevent jump to top of the comment view / Writer-comments</h3>

<ul>
  <li>Bug: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=91519">tdf#91519</a>: Jump of document canvas view to the top of the comment disrupts editing of long comments.</li>
  <li>Commit: <a href="https://gerrit.libreoffice.org/c/core/+/118638">https://gerrit.libreoffice.org/c/core/+/118638</a> (<em>waiting for review</em>)</li>
</ul>

<p>In Writer,
there are 3 issues about comment section:</p>

<ul>
  <li>
    <p>comment section scrolls to top of its view when clicking inside a comment view.</p>
  </li>
  <li>
    <p>clicking inside a comment view, scrolls the view to old cursor location automatically (if old cursor out of the visible area).</p>
  </li>
  <li>
    <p>comment section scrolls automatically to the old <em>selected</em> text (if it’s out of visible area) when clicking inside the Writer canvas view.</p>
  </li>
</ul>

<p align="center">
  <img src="https://bayramcicek.com.tr/folder/libreoffice-png/comment-multi-selection.png" alt="comment-multi-selection.png" />
</p>

<p align="center">
    <i>Another annoying issue: multi-selection (after a certain changes in the code)</i>
</p>

<h3 id="technical-details">Technical Details</h3>

<ul>
  <li><b>Fix for “autoscroll to old cursor location”</b></li>
</ul>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">SwAnnotationWin</span><span class="o">::</span><span class="n">ActivatePostIt</span><span class="p">()</span>
<span class="p">{</span>
    <span class="cm">/*...*/</span>

    <span class="c1">// prevent autoscroll to the old cursor location</span>
    <span class="c1">// when cursor out of visible area</span>
    <span class="n">GetOutlinerView</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">ShowCursor</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>

    <span class="cm">/*...*/</span>
<span class="p">}</span></code></pre></figure>

<p><code class="highlighter-rouge">GetOutlinerView()-&gt;ShowCursor();</code> has a default value <code class="highlighter-rouge">true</code> if no argument passed in. I realized that this line causes the autoscroll to the old cursor location, and setting it to <code class="highlighter-rouge">false</code> solved the issue.</p>

<ul>
  <li><b>Fix for “jumping to the top of comment view”</b></li>
</ul>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">bool</span> <span class="n">SwAnnotationWin</span><span class="o">::</span><span class="n">SetActiveSidebarWin</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">mrMgr</span><span class="p">.</span><span class="n">GetActiveSidebarWin</span><span class="p">()</span> <span class="o">==</span> <span class="k">this</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">bool</span> <span class="n">bLockView</span> <span class="o">=</span> <span class="n">mrView</span><span class="p">.</span><span class="n">GetWrtShell</span><span class="p">().</span><span class="n">IsViewLocked</span><span class="p">();</span>
    <span class="n">mrView</span><span class="p">.</span><span class="n">GetWrtShell</span><span class="p">().</span><span class="n">LockView</span><span class="p">(</span> <span class="nb">true</span> <span class="p">);</span>
    <span class="n">mrMgr</span><span class="p">.</span><span class="n">SetActiveSidebarWin</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

    <span class="c1">// don't understand why we set `bLockView` here?</span>
    <span class="n">mrView</span><span class="p">.</span><span class="n">GetWrtShell</span><span class="p">().</span><span class="n">LockView</span><span class="p">(</span> <span class="n">bLockView</span> <span class="p">);</span>
    
    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Just remove unnecessary <code class="highlighter-rouge">const bool bLockView = mrView.GetWrtShell().IsViewLocked();</code> line, set <code class="highlighter-rouge">.LockView( bLockView );</code> to <code class="highlighter-rouge">.LockView( true );</code> because we activating <code class="highlighter-rouge">SetActiveSidebarWin</code> here, it should be <code class="highlighter-rouge">true</code> and this fixes the jumping to the top of comment view issue with:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">SwAnnotationWin</span><span class="o">::</span><span class="n">UnsetActiveSidebarWin</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">mrMgr</span><span class="p">.</span><span class="n">GetActiveSidebarWin</span><span class="p">()</span> <span class="o">!=</span> <span class="k">this</span><span class="p">)</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="n">mrView</span><span class="p">.</span><span class="n">GetWrtShell</span><span class="p">().</span><span class="n">LockView</span><span class="p">(</span> <span class="nb">true</span> <span class="p">);</span>
    <span class="n">mrMgr</span><span class="p">.</span><span class="n">SetActiveSidebarWin</span><span class="p">(</span><span class="nb">nullptr</span><span class="p">);</span>
    <span class="n">mrView</span><span class="p">.</span><span class="n">GetWrtShell</span><span class="p">().</span><span class="n">LockView</span><span class="p">(</span> <span class="nb">false</span> <span class="p">);</span> <span class="c1">// set false</span>
<span class="p">}</span></code></pre></figure>

<ul>
  <li><b>Fix for “scrolling automatically to the old <em>selected</em> text”</b></li>
</ul>

<p>Steps to reproduce: (in comments section)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- select text (2-3 words for example)
- scroll selected text to unvisible area (up or down)
- click into the writer document canvas
</code></pre></div></div>

<p><strong>Result</strong>: comment writing area scrolls to unvisible selected text(s) (it becomes visible)</p>

<p><strong>Expected result</strong>: don’t scroll to the selected area, just make it unmarked.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">EditView</span><span class="o">::</span><span class="n">SetSelection</span><span class="p">(</span> <span class="k">const</span> <span class="n">ESelection</span><span class="o">&amp;</span> <span class="n">rESel</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/*...*/</span>

    <span class="n">pImpEditView</span><span class="o">-&gt;</span><span class="n">DrawSelectionXOR</span><span class="p">();</span>
    <span class="n">pImpEditView</span><span class="o">-&gt;</span><span class="n">SetEditSelection</span><span class="p">(</span> <span class="n">aNewSelection</span> <span class="p">);</span>
    <span class="n">pImpEditView</span><span class="o">-&gt;</span><span class="n">DrawSelectionXOR</span><span class="p">();</span>
    <span class="kt">bool</span> <span class="n">bGotoCursor</span> <span class="o">=</span> <span class="n">pImpEditView</span><span class="o">-&gt;</span><span class="n">DoAutoScroll</span><span class="p">();</span>

    <span class="n">ShowCursor</span><span class="p">(</span> <span class="n">bGotoCursor</span> <span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p><code class="highlighter-rouge">ShowCursor( bGotoCursor );</code> causes the jumping when deactivating the comment canvas (when clicking into writer document canvas).</p>

<p>Just made it to:</p>
<pre>
    if (HasSelection())
        ShowCursor( bGotoCursor );
</pre>

<p>and it’s solved.</p>

<ul>
  <li><b>When typing, current view have to jump to typing location</b></li>
</ul>

<p>After the certain changes in the code, I realized that the writer document canvas doesn’t jump to typing location. After a long process of debugging in the code base, found that comment section LockView doesn’t set to false:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">SidebarTextControl</span><span class="o">::</span><span class="n">LoseFocus</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// write the visible text back into the SwField</span>
    <span class="n">mrSidebarWin</span><span class="p">.</span><span class="n">UpdateData</span><span class="p">();</span>

    <span class="n">WeldEditView</span><span class="o">::</span><span class="n">LoseFocus</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="n">mrSidebarWin</span><span class="p">.</span><span class="n">IsMouseOver</span><span class="p">()</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Invalidate</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// I just added this line here and set it to false.</span>
    <span class="n">mrSidebarWin</span><span class="p">.</span><span class="n">LockView</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>Before the <code class="highlighter-rouge">mrSidebarWin.LockView();</code>, I created a new method in <code class="highlighter-rouge">sw/source/uibase/docvw/AnnotationWin2.cxx</code> to have access <code class="highlighter-rouge">LockView()</code>:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">SwAnnotationWin</span><span class="o">::</span><span class="n">LockView</span><span class="p">(</span><span class="kt">bool</span> <span class="n">bLock</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">mrView</span><span class="p">.</span><span class="n">GetWrtShell</span><span class="p">().</span><span class="n">LockView</span><span class="p">(</span> <span class="n">bLock</span> <span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p align="center">
    ***
</p>

<h3 id="summary-of-week-5">Summary of week #5</h3>

<ul>
  <li>We decided that we should get rid of writer-images and convert them into the drawing objects without losing the services of writer-images</li>
  <li>Sent a patch about tdf#91519: <a href="https://gerrit.libreoffice.org/c/core/+/118638">https://gerrit.libreoffice.org/c/core/+/118638</a></li>
</ul>

<h3 id="next-week-to-do">Next Week TO-DO</h3>

<ul>
  <li>Work on <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=51665">tdf#51665</a>: Support diagonal borders in TABLEs</li>
  <li>Update the UI for diagonal borders</li>
</ul>]]></content><author><name></name></author><category term="libreoffice-dev" /><summary type="html"><![CDATA[GSoC progress for week #5.]]></summary></entry><entry><title type="html">Week #3 - #4 - GSoC Weekly Report - 100 Paper Cuts</title><link href="http://localhost:4000/libreoffice-dev/2021/07/05/week-03-04-gsoc.html" rel="alternate" type="text/html" title="Week #3 - #4 - GSoC Weekly Report - 100 Paper Cuts" /><published>2021-07-05T08:06:19+03:00</published><updated>2021-07-05T08:06:19+03:00</updated><id>http://localhost:4000/libreoffice-dev/2021/07/05/week-03-04-gsoc</id><content type="html" xml:base="http://localhost:4000/libreoffice-dev/2021/07/05/week-03-04-gsoc.html"><![CDATA[<p>GSoC progress for week #3 and week #4.</p>

<h4 id="group-selection-does-not-work-with-raster-images--writer">Group selection does not work with raster images / Writer</h4>

<ul>
  <li>Bug: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=34438">tdf#34438 (Image-Group) - [feature request, FORMATTING] group selection does not work with raster images</a>.</li>
</ul>

<p>Writer can group <code class="highlighter-rouge">Drawing objects</code>. For example shapes(rectangles, circles), text boxes and draw images can be grouped together to drag &amp; drop.</p>

<p>However, when copy/paste or drag&amp;drop an image into the writer document canvas, (raster/bitmap)images are handled as <code class="highlighter-rouge">Frame objects (holding images/bitmaps)</code>, not <code class="highlighter-rouge">Drawing objects</code>. Drawing objects have the group feature, but this feature is not implemented for Graphics(Frame objects/bitmap). This is why Writer can’t group raster images.</p>

<p align="center">
  <img src="https://bayramcicek.com.tr/folder/libreoffice-png/shapes-selected.png" alt="shapes-selected.png" />
</p>

<p><br /></p>
<p align="center">
    ***
</p>

<p>In week #3 and #4, I tried to understand the logic behind the grouping Drawing objects. It seems more complex than it looks. To keep the blog post simple and short, I will share only the key points of my research.</p>

<h4 id="code-pointers">Code pointers:</h4>

<ul>
  <li>
    <p>All CLICK and SHIFT+CLICK operations for grouping Drawing objects handled in ./sw/source/uibase/docvw/edtwin.cxx:2770 : <a href="https://opengrok.libreoffice.org/xref/core/sw/source/uibase/docvw/edtwin.cxx?r=216a43bc#2770">https://opengrok.libreoffice.org/xref/core/sw/source/uibase/docvw/edtwin.cxx?r=216a43bc#2770</a></p>
  </li>
  <li>
    <p>SHIFT+CLICK occurs in: <a href="https://opengrok.libreoffice.org/xref/core/sw/source/uibase/docvw/edtwin.cxx?r=216a43bc#3470">https://opengrok.libreoffice.org/xref/core/sw/source/uibase/docvw/edtwin.cxx?r=216a43bc#3470</a></p>
  </li>
  <li>
    <p>Select objects : SwFEShell::SelectObj: <a href="https://opengrok.libreoffice.org/xref/core/sw/source/core/frmedt/feshview.cxx?r=715797bc#177">https://opengrok.libreoffice.org/xref/core/sw/source/core/frmedt/feshview.cxx?r=715797bc#177</a></p>
  </li>
  <li>
    <p>Marked object list: <a href="https://opengrok.libreoffice.org/xref/core/include/svx/svdmark.hxx?r=40595834#230">https://opengrok.libreoffice.org/xref/core/include/svx/svdmark.hxx?r=40595834#230</a></p>
  </li>
  <li>
    <p>graph.hxx : <a href="https://opengrok.libreoffice.org/xref/core/include/vcl/graph.hxx?r=692c5df1#37">https://opengrok.libreoffice.org/xref/core/include/vcl/graph.hxx?r=692c5df1#37</a></p>
  </li>
  <li>
    <p>Types of forms of content: <a href="https://opengrok.libreoffice.org/xref/core/sw/inc/editsh.hxx?r=1feb59c3#130">https://opengrok.libreoffice.org/xref/core/sw/inc/editsh.hxx?r=1feb59c3#130</a></p>
  </li>
  <li>
    <p>Mark object: <a href="https://opengrok.libreoffice.org/xref/core/svx/source/svdraw/svdmrkv.cxx?r=8a850eed#1877">https://opengrok.libreoffice.org/xref/core/svx/source/svdraw/svdmrkv.cxx?r=8a850eed#1877</a></p>
  </li>
</ul>

<h4 id="technical-details">Technical Details</h4>

<p><code class="highlighter-rouge">SAL_DEBUG( rMrkList.GetMarkDescription() );</code> output: (in SwFEShell::SelectObj)</p>

<p>For shapes: <code class="highlighter-rouge">shapes</code> <br />
For 2+ shapes: <code class="highlighter-rouge">2 shapes</code> <br />
For draw images: <code class="highlighter-rouge">Image with transparency</code> <br />
For text box: <code class="highlighter-rouge">Text Frame</code><br />
For raster images: <code class="highlighter-rouge">[Drawing object]</code> <br /></p>

<p>Raster images seem to have <code class="highlighter-rouge">NONE</code> object name:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#define STR_ObjNameSingulNONE    NC_("STR_ObjNameSingulNONE", "Drawing object")</span></code></pre></figure>

<p><code class="highlighter-rouge">rMrkList.GetMarkDescription()</code> can’t classify the raster images?</p>

<p><code class="highlighter-rouge">SAL_DEBUG( rMrkList.GetMarkCount() );</code> always increases by <code class="highlighter-rouge">1</code> when selecting drawing objects via SHIFT+CLICK. But always gives <code class="highlighter-rouge">1</code> when selecting raster images.</p>

<p>All selected objects store in <code class="highlighter-rouge">rMrkList</code> list:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">const</span> <span class="n">SdrMarkList</span> <span class="o">&amp;</span><span class="n">rMrkList</span> <span class="o">=</span> <span class="n">pDView</span><span class="o">-&gt;</span><span class="n">GetMarkedObjectList</span><span class="p">();</span></code></pre></figure>

<p>This means raster images added to the list but always be unmarked when GetMarkCount reaches <code class="highlighter-rouge">1</code>. The actual reason of unmarking issue is:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// call Unmark when !bAddSelect or if fly was selected</span>
<span class="kt">bool</span> <span class="n">bUnmark</span> <span class="o">=</span> <span class="o">!</span><span class="n">bAddSelect</span><span class="p">;</span> <span class="c1">// bUnmark is 'false' here </span>

<span class="k">if</span> <span class="p">(</span> <span class="n">rMrkList</span><span class="p">.</span><span class="n">GetMarkCount</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// if fly was selected, deselect it first</span>
    <span class="n">pOldSelFly</span> <span class="o">=</span> <span class="o">::</span><span class="n">GetFlyFromMarked</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">rMrkList</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="n">pOldSelFly</span> <span class="p">)</span>
    <span class="p">{</span> 

    <span class="cm">/* ... */</span>

    <span class="n">bUnmark</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="cm">/* ... */</span>

    <span class="k">if</span> <span class="p">(</span> <span class="n">bUnmark</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="n">pDView</span><span class="o">-&gt;</span><span class="n">UnmarkAll</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">pOldSelFly</span><span class="p">)</span>
            <span class="n">pOldSelFly</span><span class="o">-&gt;</span><span class="n">SelectionHasChanged</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span></code></pre></figure>

<p>With SHIFT+CLICK, <code class="highlighter-rouge">pOldSelFly = ::GetFlyFromMarked( &amp;rMrkList, this );</code> returns 0(null) when selecting the second, third … shape (which is expected); and it doesn’t set <code class="highlighter-rouge">bUnmark = true</code>, so it doesn’t execute <code class="highlighter-rouge">pDView-&gt;UnmarkAll()</code>.</p>

<p>However, <code class="highlighter-rouge">pOldSelFly = ::GetFlyFromMarked( &amp;rMrkList, this );</code> always returns an address which is evaluated <code class="highlighter-rouge">true</code> in an <code class="highlighter-rouge">if ( pOldSelFly )</code> case. This causes <code class="highlighter-rouge">bUnmark = true;</code> and executes <code class="highlighter-rouge">if ( bUnmark )</code>. Therefore, when <code class="highlighter-rouge">rMrkList.GetMarkCount() == 1</code> and <code class="highlighter-rouge">::GetFlyFromMarked( &amp;rMrkList, this )</code> returns an address; <code class="highlighter-rouge">rMrkList</code> doesn’t add the second selected raster image to itself and do unmark it.</p>

<h4 id="frame-is-not-accessible">Frame is not accessible</h4>

<p align="center">
  <img src="https://bayramcicek.com.tr/folder/libreoffice-png/frame-is-not-accessible.png" alt="frame-is-not-accessible.png" />
</p>

<p>Another interesting issue is when trying to add(select) a raster image to the shape list (unmarking disabled) debugging warns <code class="highlighter-rouge">warn: /*...*/ frame is not accessible</code>.</p>

<p>SwAccessibleMap::InvalidateCursorPosition:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// ...</span>

<span class="kt">bool</span> <span class="n">bShapeSelected</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

<span class="c1">// ...</span>

            <span class="k">else</span> <span class="nf">if</span><span class="p">(</span> <span class="n">pFESh</span><span class="o">-&gt;</span><span class="n">IsObjSelected</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span>
            <span class="p">{</span>
                <span class="n">bShapeSelected</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
                <span class="n">aFrameOrObj</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">SwFrame</span> <span class="o">*&gt;</span><span class="p">(</span> <span class="nb">nullptr</span> <span class="p">);</span>
            <span class="p">}</span>

<span class="c1">// ... </span>

    <span class="n">OSL_ENSURE</span><span class="p">(</span> <span class="n">bShapeSelected</span> <span class="o">||</span> <span class="n">aFrameOrObj</span><span class="p">.</span><span class="n">IsAccessible</span><span class="p">(</span><span class="n">GetShell</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">IsPreview</span><span class="p">()),</span>
            <span class="s">"frame is not accessible"</span> <span class="p">);</span></code></pre></figure>

<p><code class="highlighter-rouge">pFESh-&gt;IsObjSelected()</code> should return <code class="highlighter-rouge">GetMarkCount()</code>, not <code class="highlighter-rouge">0</code>. Otherwise <code class="highlighter-rouge">bShapeSelected</code> stays <code class="highlighter-rouge">false</code> and <code class="highlighter-rouge">OSL_ENSURE</code> warns <code class="highlighter-rouge">"frame is not accessible"</code>.</p>

<p>/sw/source/core/frmedt/feshview.cxx : <code class="highlighter-rouge">SwFEShell::IsObjSelected()</code> and <code class="highlighter-rouge">SwFEShell::IsFrameSelected()</code>:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">size_t</span> <span class="n">SwFEShell</span><span class="o">::</span><span class="n">IsObjSelected</span><span class="p">()</span> <span class="k">const</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">IsFrameSelected</span><span class="p">()</span> <span class="o">||</span> <span class="o">!</span><span class="n">Imp</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">HasDrawView</span><span class="p">()</span> <span class="p">)</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">Imp</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetDrawView</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetMarkedObjectList</span><span class="p">().</span><span class="n">GetMarkCount</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">bool</span> <span class="n">SwFEShell</span><span class="o">::</span><span class="n">IsFrameSelected</span><span class="p">()</span> <span class="k">const</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="n">Imp</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">HasDrawView</span><span class="p">()</span> <span class="p">)</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="nb">nullptr</span> <span class="o">!=</span> <span class="o">::</span><span class="n">GetFlyFromMarked</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">Imp</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetDrawView</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetMarkedObjectList</span><span class="p">(),</span>
                                        <span class="k">const_cast</span><span class="o">&lt;</span><span class="n">SwFEShell</span><span class="o">*&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>When selecting raster images, in SwFEShell::IsFrameSelected():</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">return</span> <span class="nb">nullptr</span> <span class="o">!=</span> <span class="o">::</span><span class="n">GetFlyFromMarked</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">Imp</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetDrawView</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetMarkedObjectList</span><span class="p">(),</span>
                                        <span class="k">const_cast</span><span class="o">&lt;</span><span class="n">SwFEShell</span><span class="o">*&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="p">);</span></code></pre></figure>

<p><code class="highlighter-rouge">GetFlyFromMarked</code> should return <code class="highlighter-rouge">false</code> (0(null)), not an address which make <code class="highlighter-rouge">nullptr != 0x01...</code> <code class="highlighter-rouge">true</code>.
<br /></p>
<p align="center">
    ***
</p>

<p>I also looked at Draw and Calc to see how images are handled. Images are converted a drawing objects and have the same attributes like shapes. But in Writer, images have different attributes and handling.</p>

<h3 id="summary-of-last-2-weeks">Summary of last 2 weeks</h3>

<ul>
  <li>Tried to understand how shapes grouped together</li>
  <li>Debugging</li>
</ul>

<h3 id="next-week-to-do">Next Week TO-DO</h3>

<ul>
  <li>Make raster images selectable(group) with SHIFT+CLICK</li>
</ul>]]></content><author><name></name></author><category term="libreoffice-dev" /><summary type="html"><![CDATA[GSoC progress for week #3 and week #4.]]></summary></entry><entry><title type="html">Week #2 - GSoC Weekly Report - 100 Paper Cuts</title><link href="http://localhost:4000/libreoffice-dev/2021/07/04/week-02-gsoc.html" rel="alternate" type="text/html" title="Week #2 - GSoC Weekly Report - 100 Paper Cuts" /><published>2021-07-04T20:50:12+03:00</published><updated>2021-07-04T20:50:12+03:00</updated><id>http://localhost:4000/libreoffice-dev/2021/07/04/week-02-gsoc</id><content type="html" xml:base="http://localhost:4000/libreoffice-dev/2021/07/04/week-02-gsoc.html"><![CDATA[<p>GSoC progress for week #2.</p>

<h4 id="disabling-slide-sorter-shorcuts-when-in-edit-mode--impress">Disabling slide sorter shorcuts when in edit mode / Impress</h4>

<ul>
  <li>Bug: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=98404">tdf#98404 - UX - While objects on a slide are being edited, notably text boxes, the new slide sorter Ctrl+Shift shortcut combinations (see bug 91909) incorrectly receive focus and move the slide</a>.</li>
</ul>

<p>In Impress, when editing a text on a slide, CTRL+SHIFT+(HOME/END/ArrowUP/ArrowDOWN) shortcuts doesn’t select the text in the slide, but move the slide to the end of the slide stack.</p>

<p>Solution is simple: Disable slide sorter shortcuts when in text edit mode. 
<br /></p>
<p align="center">
    ***
</p>

<p>This week I tried to disable slide sorter shortcuts while in edit mode. However, I couldn’t found a proper way to disable them.</p>

<h4 id="code-pointers">Code pointers:</h4>

<ul>
  <li>
    <p>edit mode in ./sd/source/ui/func/futext.cxx:1034: <a href="https://opengrok.libreoffice.org/xref/core/sd/source/ui/func/futext.cxx?r=9090dc1f#1034">https://opengrok.libreoffice.org/xref/core/sd/source/ui/func/futext.cxx?r=9090dc1f#1034</a></p>
  </li>
  <li>
    <p>SID_MOVE_PAGE_UP (LAST/DOWN/FIRST) state methods calls in: <a href="https://opengrok.libreoffice.org/xref/core/sfx2/source/control/shell.cxx?r=a3d89265#492">https://opengrok.libreoffice.org/xref/core/sfx2/source/control/shell.cxx?r=a3d89265#492</a></p>
  </li>
  <li>
    <p>ExecMethod / StateMethod: <a href="https://opengrok.libreoffice.org/xref/core/sd/sdi/SlideSorterController.sdi?r=951b243f#311">https://opengrok.libreoffice.org/xref/core/sd/sdi/SlideSorterController.sdi?r=951b243f#311</a></p>
  </li>
  <li>
    <p>Slide functions: <a href="https://opengrok.libreoffice.org/xref/core/sd/source/ui/slidesorter/shell/SlideSorterViewShell.cxx?r=9090dc1f#761">https://opengrok.libreoffice.org/xref/core/sd/source/ui/slidesorter/shell/SlideSorterViewShell.cxx?r=9090dc1f#761</a></p>
  </li>
  <li>
    <p><a href="https://opengrok.libreoffice.org/xref/core/sd/sdi/sdraw.sdi?r=951b243f#4654">https://opengrok.libreoffice.org/xref/core/sd/sdi/sdraw.sdi?r=951b243f#4654</a></p>
  </li>
</ul>

<h4 id="potential-solution">Potential solution</h4>

<p>In FuText:SetInEditMode, We should disable the global slide sorting shortcuts by something like:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">    <span class="n">SfxItemSet</span> <span class="nf">aSet</span><span class="p">(</span><span class="n">mpViewShell</span><span class="o">-&gt;</span><span class="n">GetPool</span><span class="p">());</span>
    <span class="n">aSet</span><span class="p">.</span><span class="n">DisableItem</span><span class="p">(</span><span class="n">SID_MOVE_PAGE_DOWN</span><span class="p">);</span>  <span class="c1">// and other SIDs: (LAST/UP/FIRST)</span></code></pre></figure>

<p>or:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">    <span class="n">SfxItemSet</span><span class="o">&amp;</span> <span class="n">rSet</span> <span class="o">=</span> <span class="n">mpView</span><span class="o">-&gt;</span><span class="n">GetStyleSheet</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetItemSet</span><span class="p">();</span>
    <span class="n">rSet</span><span class="p">.</span><span class="n">DisableItem</span><span class="p">(</span><span class="n">SID_MOVE_PAGE_DOWN</span><span class="p">);</span></code></pre></figure>

<p>or:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">    <span class="n">SfxItemSet</span> <span class="nf">aSet</span><span class="p">(</span><span class="n">mpViewShell</span><span class="o">-&gt;</span><span class="n">GetPool</span><span class="p">(),</span> <span class="n">svl</span><span class="o">::</span><span class="n">Items</span><span class="o">&lt;</span><span class="n">EE_PARA_LRSPACE</span><span class="p">,</span> <span class="n">EE_PARA_LRSPACE</span><span class="o">&gt;</span><span class="p">{}</span> <span class="p">);</span>
    <span class="n">aSet</span><span class="p">.</span><span class="n">DisableItem</span><span class="p">(</span><span class="n">SID_MOVE_PAGE_DOWN</span><span class="p">);</span></code></pre></figure>

<p>or:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">    <span class="k">auto</span> <span class="n">pSet</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">SfxItemSet</span><span class="o">&gt;</span><span class="p">(</span> <span class="n">mpViewShell</span><span class="o">-&gt;</span><span class="n">GetPool</span><span class="p">());</span>
    <span class="n">pSet</span><span class="o">-&gt;</span><span class="n">DisableItem</span><span class="p">(</span><span class="n">SID_MOVE_PAGE_DOWN</span><span class="p">);</span></code></pre></figure>

<p>or:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">    <span class="n">SfxItemSet</span> <span class="nf">aSet</span><span class="p">(</span><span class="n">mpViewShell</span><span class="o">-&gt;</span><span class="n">GetDoc</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetPool</span><span class="p">());</span>
    <span class="n">aSet</span><span class="p">.</span><span class="n">DisableItem</span><span class="p">(</span><span class="n">SID_SLIDE_SORTER_MODE</span><span class="p">);</span></code></pre></figure>

<p>… However, none of them are worked, and I don’t know if there is another way to make SIDs disable while in edit mode. Since we are in the GSoC period, I don’t want to waste my time with a bug that I couldn’t make progress. I will look again this bug after GSoC with a huge free time.</p>

<h3 id="summary">Summary</h3>

<ul>
  <li>Look <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=98404">tdf#98404</a> later. (most likely after GSoC)</li>
  <li>Commented on bug page: <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=98404#c25">https://bugs.documentfoundation.org/show_bug.cgi?id=98404#c25</a></li>
</ul>

<h3 id="next-week-to-do">Next Week TO-DO</h3>

<ul>
  <li>Work on <a href="https://bugs.documentfoundation.org/show_bug.cgi?id=34438">tdf#34438 - [FORMATTING] group selection does not work with raster images</a></li>
</ul>]]></content><author><name></name></author><category term="libreoffice-dev" /><summary type="html"><![CDATA[GSoC progress for week #2.]]></summary></entry></feed>